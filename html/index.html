<!DOCTYPE html>
<meta charset="utf-8">
<style type="text/css">
html {
  width: 100%;
  height: 100%;
  background-image: url(https://connector73.net/img/banner.jpg.pagespeed.ce.lHEX5NVPe2.jpg);
  background-attachment: fixed;
  background-size: cover;
}
</style>
<script>
var eventSource = new EventSource("/");

eventSource.onopen = function(e) {
  console.log("Соединение открыто");
};

eventSource.onerror = function(e) {
  if (this.readyState == EventSource.CONNECTING) {
    console.log("Соединение прервалось, переподключаемся...");
  } else {
    console.log("Ошибка, состояние: " + this.readyState);
  }
};

eventSource.onmessage = function(e) {
  console.log("Пришли данные: " + e.data);
};

eventSource.addEventListener('DeliveredEvent', function(e) {
  console.log("Звонок: " + e.data);
  var data = JSON.parse(e.data);
  alert( 'Звонок с ' + data.callingDevice + ' на ' + data.calledDevice);
});

</script>
